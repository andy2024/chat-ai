<!DOCTYPE html>

<html class="dark" lang="en"><head>
<meta charset="utf-8"/>
<link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
<link as="style" href="https://fonts.googleapis.com/css2?display=swap&amp;family=Inter%3Awght%40400%3B500%3B700%3B900&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900" onload="this.rel='stylesheet'" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<title>Stitch Design</title>
<link href="data:image/x-icon;base64," rel="icon" type="image/x-icon"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script>tailwind.config = {darkMode: "class", theme: {extend: {colors: {primary: "#359EFF", "background-light": "#f5f7f8", "background-dark": "#0f1923"}, fontFamily: {display: "Inter"}, borderRadius: {DEFAULT: "0.25rem", lg: "0.5rem", xl: "0.75rem", full: "9999px"}}}};</script>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-gray-800 dark:text-gray-200">
<div class="flex h-screen">
<aside class="w-64 bg-white dark:bg-background-dark border-r border-gray-200 dark:border-gray-800 flex flex-col justify-between p-4">
<div>
<div class="flex items-center gap-3 mb-8 px-2">
<div class="bg-center bg-no-repeat aspect-square bg-cover rounded-lg size-8" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBmQGtgd_ruHvBEln-3AV5extiUvuSv993l9brmcbpeZuKp-7H0iZwrLXjz4UOewYvM2Vv4Mp2Wc36afdUGKrHCwAvtZIyAI0OQP1KWwqxBAFKpDk6gpMhxX4QEy4za12DWrWJF29OLqpA33jKc-kWG5ACWwhU9G03-IrRCkkvhIUuPIzGRvl2xUz8-oMoymcui5y7-ql7g9ofVKMr8l8O5RrFvY92uEfHE_2XCUy5uk2UMjjnRrSJEhSiuYRNx0eaT69WyEKSqmvNX");'></div>
<h1 class="text-base font-bold text-gray-900 dark:text-white">LiLi AI Intelligent Customer Service</h1>
</div>
<nav class="flex flex-col gap-2">
<a class="flex items-center gap-3 px-3 py-2 rounded-lg bg-primary text-white" href="#">
<span class="material-symbols-outlined">add</span>
<span class="text-sm font-medium">New Chat</span>
</a>
<a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-primary/10 dark:hover:bg-primary/20 text-gray-700 dark:text-gray-300" href="#">
<span class="material-symbols-outlined">mic</span>
<span class="text-sm font-medium">Voice Chat</span>
</a>
<a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-primary/10 dark:hover:bg-primary/20 text-gray-700 dark:text-gray-300" href="#">
<span class="material-symbols-outlined">history</span>
<span class="text-sm font-medium">History</span>
</a>
</nav>
</div>
<div class="flex items-center justify-between p-2">
<div class="flex items-center gap-3">
<img alt="User" class="rounded-full size-8" src="./andy-icon.jpg"/>
<span class="text-sm font-medium text-gray-800 dark:text-white">User</span>
</div>
<button class="text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200">
<span class="material-symbols-outlined">menu_open</span>
</button>
</div>
</aside>
<main class="flex-1 flex flex-col bg-background-light dark:bg-[#1C2833]">
<div class="flex-1 overflow-y-auto p-6">
<div class="space-y-6" id="chat-container">
<!-- Messages will be dynamically added here -->
</div>
</div>
<div class="p-6 bg-white dark:bg-background-dark border-t border-gray-200 dark:border-gray-800">
<div class="max-w-3xl w-full mx-auto">
<div class="mb-4">
<label class="sr-only" for="model-select">Select Model</label>
<select class="form-select w-full rounded-lg border-gray-300 dark:border-gray-700 bg-background-light dark:bg-background-dark text-gray-800 dark:text-gray-200 focus:ring-primary focus:border-primary" id="model-select">
  <option value="gpt-oss:20b">OpenAI gpt-oss</option>
  <option value="microsoft-phi3">Microsoft Phi-3</option>
  <option value="google-deepmind">Google DeepMind</option>
  <option value="llama3.2:3b">Llama 系列（Meta AI）</option>
  <option value="qwen2.5:1.5b">通义千问</option>
  <option value="deepseek-api">DeepSeek-API</option>
  <option value="deepseek-r1:1.5b">DeepSeek V3</option>
</select>
</div>
<div class="relative">
<label class="sr-only" for="chat-input">Enter your question here...</label>
<textarea class="form-textarea w-full rounded-lg border-gray-300 dark:border-gray-700 bg-background-light dark:bg-background-dark text-gray-800 dark:text-gray-200 focus:ring-primary focus:border-primary min-h-24 p-4 pr-32 resize-none" id="user-input" placeholder="Enter your question here..."></textarea>
<button onclick="sendMessage()" class="absolute bottom-3 right-3 flex items-center justify-center rounded-lg h-10 px-4 bg-primary text-white text-sm font-bold leading-normal tracking-wide hover:bg-primary/90">
<span class="material-symbols-outlined mr-2">send</span>
<span class="truncate">Send</span>
</button>
</div>
</div>
</div>
</main>
</div>

<script>
function stripHtmlTags(html) {
  const div = document.createElement('div');
  div.innerHTML = html;
  return div.textContent || div.innerText || '';
}

async function sendMessage() {
  const userInput = document.getElementById('user-input').value.trim();
  const modelSelect = document.getElementById('model-select').value;
  const chatContainer = document.getElementById('chat-container');

  if (!userInput) {
    alert('请输入消息！');
    return;
  }

  // Display user message
  const userMessageDiv = document.createElement('div');
  userMessageDiv.className = 'flex items-start gap-4';
  userMessageDiv.innerHTML = `
    <img alt="User" class="rounded-full size-8" src="https://lh3.googleusercontent.com/aida-public/AB6AXuB0IU0i-QRlo1_obhzw0zieqg9fmLXVGmWnu_U4ZuFDk0TBEa-a2ScjSs02WsAFDMAKA0PTcGxXMxwZ7hhE7TnVZUpvVlsq-tWZRHbYU4jEPlYjQJ69kfyOy5vWSnbSFIKaN7IRzWUsR3hcdd4vuWP0ua4xVPc_BmZsRcOhW7JNHI1D5APRGAMVFKoIOuiJUW45ZHh9dId_7O2_cO7RIExZ8iylOpatrB8HHkIVSIvmACpduE-b6PXu-7RvzRO5rY5NAXzN57CK2kcW"/>
    <div class="bg-white dark:bg-background-dark p-4 rounded-lg rounded-tl-none max-w-xl">
      <p class="text-sm text-gray-800 dark:text-gray-200">${userInput}</p>
    </div>
  `;
  chatContainer.appendChild(userMessageDiv);

  // Clear input
  document.getElementById('user-input').value = '';

  // Scroll to bottom
  chatContainer.scrollTop = chatContainer.scrollHeight;

  // Show loading message
  const loadingDiv = document.createElement('div');
  loadingDiv.className = 'flex items-start gap-4 justify-end';
  loadingDiv.innerHTML = `
    <div class="bg-primary/10 dark:bg-primary/20 p-4 rounded-lg rounded-tr-none max-w-xl">
      <p class="text-sm text-gray-800 dark:text-gray-200">正在思考中...</p>
    </div>
    <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-lg size-8" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBmQGtgd_ruHvBEln-3AV5extiUvuSv993l9brmcbpeZuKp-7H0iZwrLXjz4UOewYvM2Vv4Mp2Wc36afdUGKrHCwAvtZIyAI0OQP1KWwqxBAFKpDk6gpMhxX4QEy4za12DWrWJF29OLqpA33jKc-kWG5ACWwhU9G03-IrRCkkvhIUuPIzGRvl2xUz8-oMoymcui5y7-ql7g9ofVKMr8l8O5RrFvY92uEfHE_2XCUy5uk2UMjjnRrSJEhSiuYRNx0eaT69WyEKSqmvNX");'></div>
  `;
  chatContainer.appendChild(loadingDiv);
  chatContainer.scrollTop = chatContainer.scrollHeight;

  try {
    let response;
    if (modelSelect === 'deepseek-api') {
      // Call DeepSeek official API
      response = await fetch('https://api.deepseek.com/v1/chat/completions', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': 'Bearer sk-e700a5392b8e4722b5783861a8b6d719'
        },
        body: JSON.stringify({
          model: 'deepseek-chat',
          messages: [{ role: 'user', content: userInput }],
          max_tokens: 500,
        }),
      });
    } else {
      // Call local API for other models (e.g., deepseek-r1:1.5b)
      response = await fetch('http://localhost:11434/v1/chat/completions', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          model: modelSelect,
          messages: [{ role: 'user', content: userInput }],
          max_tokens: 100,
        }),
      });
    }

    if (!response.ok) {
      throw new Error('API request failed');
    }

    const data = await response.json();
    const assistantMessageContent = stripHtmlTags(
      modelSelect === 'deepseek-api' ? data.choices[0].message.content : data.choices[0].message.content
    );

    // Remove loading message
    chatContainer.removeChild(loadingDiv);

    // Display assistant message
    const assistantMessageDiv = document.createElement('div');
    assistantMessageDiv.className = 'flex items-start gap-4 justify-end';
    assistantMessageDiv.innerHTML = `
      <div class="bg-primary/10 dark:bg-primary/20 p-4 rounded-lg rounded-tr-none max-w-xl">
        <p class="text-sm text-gray-800 dark:text-gray-200">${assistantMessageContent}</p>
      </div>
      <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-lg size-8" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBmQGtgd_ruHvBEln-3AV5extiUvuSv993l9brmcbpeZuKp-7H0iZwrLXjz4UOewYvM2Vv4Mp2Wc36afdUGKrHCwAvtZIyAI0OQP1KWwqxBAFKpDk6gpMhxX4QEy4za12DWrWJF29OLqpA33jKc-kWG5ACWwhU9G03-IrRCkkvhIUuPIzGRvl2xUz8-oMoymcui5y7-ql7g9ofVKMr8l8O5RrFvY92uEfHE_2XCUy5uk2UMjjnRrSJEhSiuYRNx0eaT69WyEKSqmvNX");'></div>
    `;
    chatContainer.appendChild(assistantMessageDiv);

    // Scroll to bottom
    chatContainer.scrollTop = chatContainer.scrollHeight;
  } catch (error) {
    console.error('Error:', error);
    
    // Remove loading message
    chatContainer.removeChild(loadingDiv);
    
    const errorMessageDiv = document.createElement('div');
    errorMessageDiv.className = 'flex items-start gap-4 justify-end';
    errorMessageDiv.innerHTML = `
      <div class="bg-red-100 dark:bg-red-900/20 p-4 rounded-lg rounded-tr-none max-w-xl">
        <p class="text-sm text-red-800 dark:text-red-200">抱歉，处理您的请求时出错。请检查网络连接或稍后重试。</p>
      </div>
      <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-lg size-8" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBmQGtgd_ruHvBEln-3AV5extiUvuSv993l9brmcbpeZuKp-7H0iZwrLXjz4UOewYvM2Vv4Mp2Wc36afdUGKrHCwAvtZIyAI0OQP1KWwqxBAFKpDk6gpMhxX4QEy4za12DWrWJF29OLqpA33jKc-kWG5ACWwhU9G03-IrRCkkvhIUuPIzGRvl2xUz8-oMoymcui5y7-ql7g9ofVKMr8l8O5RrFvY92uEfHE_2XCUy5uk2UMjjnRrSJEhSiuYRNx0eaT69WyEKSqmvNX");'></div>
    `;
    chatContainer.appendChild(errorMessageDiv);
    chatContainer.scrollTop = chatContainer.scrollHeight;
  }
}

// Allow sending message with Enter key
document.getElementById('user-input').addEventListener('keypress', (e) => {
  if (e.key === 'Enter' && !e.shiftKey) {
    e.preventDefault();
    sendMessage();
  }
});

// Add new chat functionality
document.querySelector('a[href="#"]').addEventListener('click', (e) => {
  e.preventDefault();
  document.getElementById('chat-container').innerHTML = '';
});
</script>

</body></html>